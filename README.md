# InventoryCosts

## 库存计算方法

### 库存成本算法配置说明

> 系统提供了“全部加权平均”、“移动加权平均”两种库存成计算方法。
 
##### “全部加权平均”：


采购均价=采购历史中所有该单品的数量乘以其对应的真实采购价后求和，再除以单品总数量。

库存总成本=单品采购均价*库存数量


 

##### “移动加权平均”：

###### 采购时：

库存总成本=上次剩余库存成本+本次入库数量*实际采购价格；

成本单价=库存总成本/（采购前存货总数量+本次入库存货数量）。

###### 销售时：

库存总成本=上次剩余库存成本-本次出库数量*成本单价；

> 库存成本单价不变。

### 两者的计算区别说明：
 
“全部加权平均”取所有的采购历史中的单品的采购均价作为商品的成本，此方法计算简单，适用于新用户快速开展业务。
但是如果某个单品采购金额经常发生变化时，成本会受到历史采购的影响，导致销售报表利润计算有偏差。

 

“移动加权平均”会记录每次库存变动（销售、采购）的成本，可以准确计算每单销售的利润。
但是由于该算法在出现负库存时，计算出来的利润没有意义，所以商家在使用该算法时，要控制库存，如果出现负库存出售，
需要在业务时间点之前开采购单将库存补足才能得到准确的成本和利润。
